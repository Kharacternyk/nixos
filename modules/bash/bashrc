export HISTCONTROL=erasedups
export HISTSIZE=-1

shopt -s autocd
shopt -s histappend

bind -m vi '/: "\C-r"'

source "$(fzf-share)"/key-bindings.bash

get() {
    pkgs=""
    for pkg in "$@"; do
        if [[ $pkg == *#* ]]; then
            pkgs+=" $pkg"
        else
            pkgs+=" nixpkgs-local#$pkg"
        fi
    done
    NIXPKGS_ALLOW_UNFREE=1 nix shell$pkgs --impure
}

dev() {
    mkdir -p .nix
    echo '*' > .nix/.gitignore
    [[ -f .nix/pin ]] || nix flake update
    nix develop --profile .nix/profile
}
